/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var f=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var v=(a,e)=>{for(var i in e)f(a,i,{get:e[i],enumerable:!0})},F=(a,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of w(e))!m.call(a,t)&&t!==i&&f(a,t,{get:()=>e[t],enumerable:!(s=N(e,t))||s.enumerable});return a};var M=a=>F(f({},"__esModule",{value:!0}),a);var R={};v(R,{default:()=>d});module.exports=M(R);var r=require("obsidian"),d=class extends r.Plugin{constructor(){super(...arguments);this.isModifyed=!1}async onload(){let i=await this.app.vault.readConfigJson("daily-notes");if(!i||!i.folder){new r.Notice(`\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u043B\u0430\u0433\u0438\u043D\u0430 "${this.manifest.name}" \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0439 \u043F\u043B\u0430\u0433\u0438\u043D "\u0415\u0436\u0435\u0434\u043D\u0435\u0432\u043D\u044B\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438" `,0),this.unload();return}this.folderDailyNotes=i.folder,console.log("Load plugin DailyReadStats!"),this.registerEvent(this.app.vault.on("modify",async s=>{let t=s;if(this.checkConditionsFile(t)&&(console.log(this.isModifyed),this.isModifyed=!this.isModifyed,this.isModifyed)){let o=await this.app.vault.read(t);await this.writeReadStats(t,o)}}))}async writeReadStats(i,s){let t=s.split(`
`),o=0,n=!1,h=0;t.forEach((l,u)=>{if(l.contains("read: "))o=u;else if(l==="# \u0427\u0442\u0435\u043D\u0438\u0435")n=!0;else if(n&&l.contains("#"))n=!1;else if(n){if(!l.startsWith("-"))return;let p=l.split(":").map((g,S)=>g.trim()),c=parseInt(p[p.length-1]);h+=Number.isNaN(c)?0:c}}),t[o]="read: "+h;let y=t.join(`
`);await this.app.vault.modify(i,y)}checkConditionsFile(i){return i&&i.path.contains(this.folderDailyNotes)}async onunload(){console.log("Unload plugin DailyReadStats...")}};
